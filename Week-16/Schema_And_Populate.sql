
CREATE DATABASE Warehouse;

CREATE TABLE CITIES (
  CITY CHAR(20),
  STATE CHAR(20),
  PRIMARY KEY (CITY, STATE)
);

CREATE TABLE WAREHOUSES (
  WID INTEGER,
  WNAME CHAR(30),
  LOCATION CHAR(20),
  EXTRA CONTEXT JSON,
  PRIMARY KEY (WID),
  FOREIGN KEY (LOCATION) REFERENCES CITIES(CITY)
);

CREATE TABLE STORES (
  SID INTEGER,
  STORE_NAME CHAR(20),
  LOCATION_CITY CHAR(20),
  PRIMARY KEY (SID),
  FOREIGN KEY (LOCATION_CITY) REFERENCES CITIES(CITY)
);

CREATE TABLE CUSTOMER (
  CNO INTEGER,
  CNAME CHAR(50),
  ADDR VARCHAR(50),
  CU_CITY CHAR(20),
  PRIMARY KEY (CNO),
  FOREIGN KEY (CU_CITY) REFERENCES CITIES(CITY)
);

CREATE TABLE ORDERS (
  ONO INT,
  ODATE DATE,
  CNO INTEGER,
  PRIMARY KEY (ONO),
  FOREIGN KEY (CNO) REFERENCES CUSTOMER(CNO)
);

CREATE TABLE ITEMS (
  ITEMNO INTEGER,
  DESCRIPTION TEXT,
  WEIGHT DECIMAL(5,2),
  COST DECIMAL(5,2),
  PRIMARY KEY (ITEMNO)
);

CREATE TABLE ORDERS_ITEMS (
  ONO INT,
  ITEMNO INTEGER,
  ORDERED_QUANTITY INTEGER,
  PRIMARY KEY (ONO, ITEMNO),
  FOREIGN KEY (ONO) REFERENCES ORDERS(ONO),
  FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO)
);

CREATE TABLE STORES_ITEMS (
  SID INTEGER,
  ITEMNO INTEGER,
  QUANTITY INTEGER,
  PRIMARY KEY (SID, ITEMNO),
  FOREIGN KEY (SID) REFERENCES STORES(SID),
  FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO)
);


--Populate Tables---

INSERT INTO CITIES (CITY, STATE)
VALUES
  ('Pune', 'Maharashtra'),
  ('Mumbai', 'Maharashtra'),
  ('Delhi', 'Delhi'),
  ('Bangalore', 'Karnataka'),
  ('Chennai', 'Tamil Nadu');

INSERT INTO WAREHOUSES (WID, WNAME, LOCATION)
VALUES
  (1, 'Pune Warehouse', 'Pune'),
  (2, 'Mumbai Warehouse', 'Mumbai'),
  (3, 'Delhi Warehouse', 'Delhi');

INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY)
VALUES
  (1, 'Pune Store 1', 'Pune'),
  (2, 'Pune Store 2', 'Pune'),
  (3, 'Mumbai Store 1', 'Mumbai'),
  (4, 'Delhi Store 1', 'Delhi');

INSERT INTO CUSTOMER (CNO, CNAME, ADDR, CU_CITY)
VALUES
  (1, 'Mr. Patil', 'Pune, Maharashtra', 'Pune'),
  (2, 'Mrs. Sharma', 'Mumbai, Maharashtra', 'Mumbai'),
  (3, 'Mr. Singh', 'Delhi, Delhi', 'Delhi');

INSERT INTO ORDERS (ONO, ODATE, CNO)
VALUES
  (1, '2023-05-01', 1),
  (2, '2023-05-02', 2),
  (3, '2023-05-03', 3);

INSERT INTO ITEMS (ITEMNO, DESCRIPTION, WEIGHT, COST)
VALUES
  (1, 'Item 1', 2.5, 10.99),
  (2, 'Item 2', 1.8, 7.99),
  (3, 'Item 3', 3.2, 15.99);

INSERT INTO ORDERS_ITEMS (ONO, ITEMNO, ORDERED_QUANTITY)
VALUES
  (1, 1, 5),
  (1, 2, 3),
  (2, 2, 2),
  (3, 3, 4);

INSERT INTO STORES_ITEMS (SID, ITEMNO, QUANTITY)
VALUES
  (1, 1, 10),
  (1, 2, 5),
  (2, 2, 8),
  (3, 3, 15);